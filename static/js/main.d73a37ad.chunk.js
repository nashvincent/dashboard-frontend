(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{217:function(e,t,a){e.exports=a(431)},222:function(e,t,a){},244:function(e,t,a){},252:function(e,t){},431:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(74),o=a.n(c),l=(a(222),a(7)),i=a.n(l),s=a(13),u=a(10),m=a(56),d=a(8),p=a(51),f=a.n(p),b="https://196414905eb1.ngrok.io",h=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(b,"/initial"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={getRandom:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(b,"/get_rand_abst"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),analyze:function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat(b,"/analyze"),{abstract:t});case 2:return a=e.sent,console.log("Axios API returned data after analysis"),console.log(a),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),train:function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat(b,"/train"),{abstract:t});case 2:return a=e.sent,console.log("data returned by train function"),console.log(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadFile:function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.next=4,f.a.post("".concat(b,"/upload"),a);case 4:return n=e.sent,e.abrupt("return",n.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getInitialData:h},v=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(m.b,{to:"/"},"Text Analysis Dashboard")),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/analysis"},"Analysis"))))},E=a(47),w=a(36),y=(a(244),function(e){var t=e.handleNewCoherenceValues,a=e.handleNewWordcloudData,c=e.handleNewTopics,o=e.initialTopics,l=Object(n.useState)(""),m=Object(u.a)(l,2),d=m[0],p=m[1],f=Object(n.useState)(void 0),b=Object(u.a)(f,2),h=b[0],v=b[1],y=Object(n.useState)(o),x=Object(u.a)(y,2),N=x[0],j=x[1],O=Object(n.useState)(!1),k=Object(u.a)(O,2),A=k[0],S=k[1],T=Object(n.useState)(null),D=Object(u.a)(T,2),I=D[0],_=D[1];Object(n.useEffect)((function(){console.log("DashInit",o),j(o)}),[o]);var C=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getRandom();case 2:t=e.sent,p(t),console.log(d);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),S(!0),t=Object(w.a)(N),a=d.slice(0),p(""),e.next=7,g.analyze(a);case 7:for(o in n=e.sent,console.log(n),S(!1),r=function(e){var a=n.topics.find((function(t){return t[0]==e}));t[e].percentage=a?parseFloat(100*a[1]).toFixed(2):0},t)r(o);v(n.words),j(t),c(t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(i.a.mark((function e(){var n,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,g.train();case 3:n=e.sent,console.log(n),r=n.topic_list,t(n.coherence_values),a(n.word_cloud_data),c=0,o=r.map((function(e){return{description:"Topic ".concat(c+=1," : ").concat(e),percentage:void 0}})),console.log(o),S(!1),j(o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Submitted Form"),e.next=4,g.uploadFile(I);case 4:200===e.sent?alert("file uploaded"):alert("upload failed");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container",style:{marginTop:"20px"}},r.a.createElement("div",{className:"row"},r.a.createElement("ul",{className:"col-12 list-inline col-lg-3 bg-0",id:"topicList"},N.map((function(e,t){var a;return setTimeout((function(){var e=document.getElementById("topic".concat(t));null!==e&&(e.className="list-inline-item col-xs d-md-block topic-rel roundedBubble topic_".concat(t," animateBubble"))}),300*t+100),r.a.createElement("li",(a={className:"list-inline-item col-xs d-md-block topic-rel"},Object(E.a)(a,"className","invis roundedBubble topic_"+t),Object(E.a)(a,"key","topic"+t),Object(E.a)(a,"id","topic"+t),a),e.description,r.a.createElement("br",null),e.percentage)}))),r.a.createElement("div",{className:"col-lg-9 col-12 bg-2 pt-2 pb-2 roundinator"},h?h.map((function(e,t){return r.a.createElement("span",{key:"colorWord"+t,className:"roundedHighlight topic_"+e[1]},e[0],r.a.createElement("span",{className:"colorSpace"}," "))})):r.a.createElement("p",{className:"blockquote text-center "},"Awaiting Document Submission"))),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-12"},A&&r.a.createElement("div",{className:"spinner-grow text-light spinner-grow-lg",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),r.a.createElement("textarea",{name:"abstract",id:"abstractInput",placeholder:"Input some data here or double click to get a random document",className:"col-12 form-control form-rounded",rows:"10",onDoubleClick:function(){C()},value:d,onChange:function(e){p(e.target.value)}}),r.a.createElement("div",{className:"mt-4 col-12"},r.a.createElement("button",{onClick:R,className:"btn btn-success btn-lg col-4 offset-md-1 btn-space animateBubble"},"ANALYZE"),r.a.createElement("button",{onClick:B,className:"btn btn-primary btn-lg col-4 offset-md-1 btn-space animateBubble"},"TRAIN"))),r.a.createElement("div",{className:"container-fluid mt-5 mb-5"},r.a.createElement("form",{onSubmit:M},r.a.createElement("h1",{className:"text-left text-white"},"Upload a CSV file"),r.a.createElement("br",null),r.a.createElement("input",{id:"upload-file",type:"file",onChange:function(e){_(e.target.files[0]),console.log(e.target.files[0])},className:"roundinator"}),r.a.createElement("button",{type:"submit",className:"btn btn-light",style:{marginLeft:50}},"Upload File"))))}),x=a(192),N={enableTooltip:!0,deterministic:!1,fontFamily:"roboto",fontSizes:[10,60],fontStyle:"normal",fontWeight:"normal",rotations:3,rotationAngles:[0,0],scale:"log",spiral:"archimedean",transitionDuration:1e3},j=function(e){var t=e.wordcloudData;return console.log(t),r.a.createElement("div",{style:{justifyContent:"center"}},r.a.createElement("p",{className:"display-4 lead font-weight-light text-center gradientText"},"Topic-wise Breakdown"),r.a.createElement("div",{style:{height:400,width:450}},0!==t.length?r.a.createElement(x.a,{options:N,words:t,minSize:[400,400]}):r.a.createElement("h1",{style:{textAlign:"center",marginTop:50}},"Please analyze a document")))},O=a(179),k=a(180),A=a(194),S=a(193),T=a(16),D=function(e){var t=Math.PI/180,a=e.cx,n=e.cy,c=e.midAngle,o=e.innerRadius,l=e.outerRadius,i=e.startAngle,s=e.endAngle,u=e.fill,m=e.payload,d=(e.percent,e.value),p=Math.sin(-t*c),f=Math.cos(-t*c),b=a+(l+10)*f,h=n+(l+10)*p,g=a+(l+30)*f,v=n+(l+30)*p,E=g+22*(f>=0?1:-1),w=v,y=f>=0?"start":"end";return r.a.createElement("g",null,r.a.createElement("text",{x:a,y:n,dy:8,textAnchor:"middle",fill:u},m.name),r.a.createElement(T.g,{cx:a,cy:n,innerRadius:o,outerRadius:l,startAngle:i,endAngle:s,fill:u}),r.a.createElement(T.g,{cx:a,cy:n,startAngle:i,endAngle:s,innerRadius:l+6,outerRadius:l+10,fill:u}),r.a.createElement("path",{d:"M".concat(b,",").concat(h,"L").concat(g,",").concat(v,"L").concat(E,",").concat(w),stroke:u,fill:"none"}),r.a.createElement("circle",{cx:E,cy:w,r:10,fill:u,stroke:"none"}),r.a.createElement("text",{x:E+12*(f>=0?1:-1),y:w,textAnchor:y,fill:"#333"},"".concat(d,"%")))},I=function(e){Object(A.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this)).getInitialState=function(){return{activeIndex:0}},n.onPieEnter=function(e,t){n.setState({activeIndex:t})},n.state={activeIndex:0},n}return Object(k.a)(a,[{key:"render",value:function(){return console.log(this.props.topics),r.a.createElement("div",{style:{justifyContent:"center",textAlign:"-webkit-center"}},r.a.createElement("p",{className:"display-4 font-weight-light text-center gradientText"},"Document Breakdown"),this.props.topics.length>0?r.a.createElement(T.f,{width:400,height:400},r.a.createElement(T.e,{activeIndex:this.state.activeIndex,activeShape:D,data:this.props.topics,cx:200,cy:150,innerRadius:60,outerRadius:80,fill:"#8884d8",onMouseEnter:this.onPieEnter})):r.a.createElement("h1",{style:{textAlign:"center",marginTop:90}},"Please analyze a document"))}}]),a}(r.a.Component),_=function(e){var t=e.x,a=e.y,n=e.stroke,c=e.value;return r.a.createElement("text",{x:t,y:a,dy:-4,fill:n,fontSize:10,textAnchor:"middle"},c)},C=function(e){var t=e.x,a=e.y,n=e.payload;return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},n.value))},R=function(e){var t=e.coherenceValues;return r.a.createElement("div",{style:{justifyContent:"center"}},r.a.createElement("p",{className:"display-4 font-weight-light text-center gradientText"},"Model Coherence Values"),r.a.createElement(T.d,{width:1050,height:300,data:t,margin:{top:20,right:30,left:20,bottom:10}},r.a.createElement(T.a,{strokeDasharray:"3 3"}),r.a.createElement(T.i,{dataKey:"num_topics",height:60,tick:r.a.createElement(C,null)}),r.a.createElement(T.j,{type:"number",domain:function(){var e=t.map((function(e){return e.coherence_value})),a=[],n=Number((Math.max.apply(Math,Object(w.a)(e))+5e-4).toPrecision(4)),r=Number((Math.min.apply(Math,Object(w.a)(e))-5e-4).toPrecision(4));return a.push(r,n),a}()}),r.a.createElement(T.h,null),r.a.createElement(T.b,null),r.a.createElement(T.c,{type:"monotone",dataKey:"coherence_value",stroke:"#8884d8",label:r.a.createElement(_,null)})))},B=function(e){var t=e.coherenceValues,a=e.wordcloudData,c=e.topics,o=function(){var e=c.map((function(e){return{name:e.description.slice(0,8).trim(),value:Number(e.percentage)}}));return console.log("Relevant: ",e),e},l=Object(n.useState)(!1),i=Object(u.a)(l,2),s=i[0],m=i[1],d=Object(n.useState)((function(){return o()[0]})),p=Object(u.a)(d,2),f=p[0],b=p[1],h=s?"show":"",g=o().map((function(e){return r.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){b(e),m(!1)}},e.name)}));return r.a.createElement("div",{className:"container",style:{marginTop:"20px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h1",{className:"page-header text-white display-2 ml-5"},"Analysis"))),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-5 bg-white mr-auto ml-auto shadow-lg p-3 mb-5 rounded"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton",onClick:function(){return m(!s)}},"Topic"),r.a.createElement("div",{className:"dropdown-menu collapse ".concat(h)},g)),r.a.createElement(j,{wordcloudData:function(){if(0===c.length)return[];c.find((function(e){return f.name==e.description.slice(0,8)}));var e=Number(f.name.substring(6))-1;return console.log("data: ",a[e]),a[e]}()})),r.a.createElement("div",{className:"col-5 bg-white ml-auto mr-auto shadow-lg p-3 mb-5 rounded"},r.a.createElement(I,{topics:o()}))),r.a.createElement("div",{className:"row mt-5 mb-5"},r.a.createElement("div",{className:"col-12 bg-white mr-auto ml-auto shadow-lg p-3 mb-5 rounded"},r.a.createElement(R,{coherenceValues:t}))))},M=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),p=l[0],f=l[1],b=Object(n.useState)([]),h=Object(u.a)(b,2),E=h[0],w=h[1];return Object(n.useEffect)((function(){console.log("App",E)}),[E]),Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getInitialData();case 2:t=e.sent,console.log(t),a=t.topic_list.map((function(e,t){return{description:"Topic ".concat(t+1," : ").concat(e),percentage:void 0}})),w(a),c(t.coherence_values),f(t.word_cloud_data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/analysis"},r.a.createElement(B,{coherenceValues:a,wordcloudData:p,topics:E.filter((function(e){return e.percentage>1}))})),r.a.createElement(d.a,{path:"/"},r.a.createElement(y,{initialTopics:E,handleNewCoherenceValues:function(e){return c(e)},handleNewWordcloudData:function(e){return f(e)},handleNewTopics:function(e){return w(e)}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(427),a(430);o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[217,1,2]]]);
//# sourceMappingURL=main.d73a37ad.chunk.js.map